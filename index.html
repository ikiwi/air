<html>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	  <script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>
	<style>
      		#map {
        		height: 70%;
      		     }
      		html, body {
        		height: 100%;
        		margin: 15;
        		padding: 10;
      			}
    	</style>
</head>
	
<body>
    	<h1> Air Quality Sensor Database </h1>
    	<title>Air Quality Sensor Database</title>
    	<p>CO2:<label id="CO2_Label"> </label></p>
    	<p>TVOC:<label id="TVOC_Label"> </label></p>
    	<p>Temperature:<label id="Temperature_Label"> </label></p>
    	<p>Time:<label id="Time_Label"> </label></p>
    	<p>S12SD Raw:<label id="S12SD_Raw_Lable"> </label></p>
    	<p>S12SD Volts:<label id="S12SD_Volts_Label"></label></p>
	<p>Sound Peak-to-Peak Values:<label id="peak_to_peak_Label"></label></p>
	<p>Sound Values:<label id="Sound_Values_Label"></label></p>
	<p>Gas Level:<label id="Gas_Level_Label"></label></p>
	<p>Light Level:<label id="Light_Level_Label"></label></p>
	<p>DHT Temperature:<label id="DHT_Temperature_Label"></label></p>
	<p>Humidity:<label id="Humidity_Label"></label></p>
	<p>Latitude:<label id="Latitude_Label"></label></p>
	<p>Longitude:<label id="Longitude_Label"></label></p>
	
	<div id="map"></div>
	<script>
		var map;
		function initMap() {
        		map = new google.maps.Map(document.getElementById('map'), {
          		center: {lat: 32.715736, lng: -117.1611},
         		zoom: 9
       			});

        		$.ajax({url: "https://airquality-8059.firebaseio.com/data.json", success: function(result1) {
            	// console.log(result1);
            	// jquery
				var allData = [];
				var index = 1;
				
            			$.each(result1, function(key, value) {

              			var result = value;

              			console.log(result.CO2);
              			console.log(result.TVOC);
              			console.log(result.Temperature);
              			console.log(result.Time);
	      			console.log(result.S12SD_Raw);
	     			console.log(result.S12SD_Volts);
				console.log(result.peak_to_peak);
				console.log(result.Sound_Volts);
              			console.log(result.lattitude);
             			console.log(result.longitude);             			
				console.log(result.Light_Level);
				console.log(result.Gas_Level);
				console.log(result.DHT_Temperature);
             			console.log(result.longitude);

              			$("#CO2_Label").text(result.CO2);
              			$("#TVOC_Label").text(result.TVOC);
              			$("#Temperature_Label").text(result.Temperature);
              			$("#Time_Label").text(result.Time);
	      			$("#S12SD_Raw_Lable").text(result.S12SD_Raw);
              			$("#S12SD_Volts_Label").text(result.S12SD_Volts);
				$("#peak_to_peak_Label").text(result.peak_to_peak);
				$("#Sound_Values_Label").text(result.Sound_Values);
				$("#Gas_Level_Label").text(result.Gas_Level);
				$("#Light_Level_Label").text(result.Light_Level);
				$("#DHT_Temperature_Label").text(result.DHT_Temperature);
				$("#Humidity_Label").text(result.Humidity);
				$("#Latitude_Label").text(result.Latitude);
				$("#Longitude_Label").text(result.Longitude);

		    		var data = [];
		      		data.push(index);
              			data.push(result.CO2);
             			index++;
              			allData.push(data);
              
              			// The location of Airpi
              			var uluru = {lat: result.lattitude, lng: result.longitude};
              			var marker = new google.maps.Marker({
                  		position: uluru, 
                  		map: map,
                  		title: "Airpi",
                  		draggable: true,
                  		animation: google.maps.Animation.DROP
              				});            
            			});
        		}});        
     		 }
	</script>
	
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwxvMl3ZCLS87abguRfb-cyfwuyUE4OVM&callback=initMap"async defer>
</script>

</body>
</html>

